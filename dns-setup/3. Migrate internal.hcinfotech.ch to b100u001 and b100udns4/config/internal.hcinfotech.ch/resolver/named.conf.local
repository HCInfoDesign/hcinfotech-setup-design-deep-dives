view "internal" {
  match-clients { internal; };
  recursion yes;

  // Do NOT forward queries for internal clients â€” resolve locally
  allow-query { internal; };
  allow-transfer {
    10.1.50.34;
    key ddns-transfer-key;
  };
  notify yes;

  zone "internal.hcinfotech.ch" IN {
    type secondary;
    file "/var/lib/bind/internal.hcinfotech.ch.zone";
    primaries {
      10.1.50.31;
    };
  };

  // Forward zone for child (delegated) so queries go directly to child NS
  zone "a.internal.hcinfotech.ch" IN {
    type forward;
    forwarders { 10.1.51.81; 10.1.51.82; 10.1.51.83; };
  };

  zone "b.internal.hcinfotech.ch" IN {
    type forward;
    forwarders { 10.1.50.84; 10.1.50.85; 10.1.50.86; };
  };

  // Reverse zone
  zone "50.1.10.in-addr.arpa" {
    type forward;
    forwarders { 10.1.50.84; 10.1.50.85; 10.1.50.86; };
  };

  // Reverse zone
  zone "51.1.10.in-addr.arpa" {
    type forward;
    forwarders { 10.1.51.81; 10.1.51.82; 10.1.51.83; };
  };
};

view "external" {
  match-clients { any; };
  recursion yes;
  forwarders {
    1.1.1.1; # Cloudflare
    1.0.0.1; # Cloudflare secondary
  };
};
